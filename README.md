# WebSRS

每个人写自己待完成的功能点，按照优先级排序，按照优先级解决。每个功能点大概详细到一个小时能解决。剩下的功能都是硬骨头，剩下的时间也肯定是不够把这个东西做的尽善尽美，挑重点解决。

TODO

hl
- [ ] 添加学生finance,password表需要添加记录
- [ ] 选课成功没有刷新
- [ ] tornado生命周期
- [ ] 离开选课计划编辑要确认
- [ ] python class中调用函数
- [ ] 添加删除选课计划
- [ ] 添加公布选课计划
- [ ] 批量导入学生
- [ ] 登陆界面验证码
- [ ] 抽象zjp.py的handler类
- [ ] 上课时间添加上第几周到第几周
- [ ] 开启tornado之后重启服务器，con出故障需要捕获重连
- [ ] 学生预选排序，给课程赋顺序
- [ ] 学生选课界面
- [ ] 选课计划删除按钮竖向居中
- [ ] 推出图标太小
- [ ] 轮播图圆角图片


cjw
- [ ] 页脚


zjp
- [ ] 结束选课
- [ ] 老师上成绩h1显示课程名、课程编号（更人性化，防止上错成绩）


- Done
- [x] 外建
- [x] 解决template加上 nav 之后下方的元素不会自动向下
- [x] 密码校验使用异步api
- [x] 密码输入错误提示
- [x] 各个功能进去后需要检查role
- [x] 选课计划时间
- [x] 添加选课课程
- [x] 添加修改选课计划


1. 主任添加选课计划
2. 主任发布选课计划
3. - 老师：选择自己教的课程（时间不能冲突，一个教学班只有一个老师）
   - 学生：对课程进行排序（结果json，存到用户表）
4. 到选课开始时间展示选课按钮
没有老师的课程不能选（清除没老师的课程）

按钮分首选和备选 ajax
首选计选课总人数，不能超过10个人
备选不计入统计
首选最多4个
备选最多2个
一门课不能选两次
一个教学班不能选两次
按钮状态需要能变化
成功需要一个提醒

5. 结束选课
- 从choice_temp中选出结束的planid里所有的选课记录
- 对所有选课记录进行投票统计，如果一个班级首选加备选人数都不超过3个人，这个教学班删除。写入一个list
- 按照首选给每个人选课，生成一个选课情况dict。在dict中统计所有班级的人数，如果不够3个人这个班级删除，dict中的记录删除
- 用第一备选给学生补齐选课，找dict中不满4门课的学生。给他选上第一备选。统计dict所有课选课人数，不满3个人删除
- 用第二备选给学生补齐选课，找dict中不满4门课的学生。给他选上第二备选。统计dict所有课选课人数，不满3个人删除
- 用户确认，从choice_temp中删除planidu所有的选课记录，删除不够人数的教学班，添加扣费记录，尝试扣费

6. 扣费
- 所有需要扣的账单，先添加到chargequeue
- 用一个函数，按照chargequeue的信息从财务系统进行扣费
- 扣费接口需要单独写



{sid:[cid], sid:[cid], sid:[cid]}



1. 用户浏览器 请求 http/https
dxy.zdcd.online:8000

2. tornado 处理请求
httpd apache 端口转发
8000 ttps -> 5000 http

3. 静态 / 动态
js
jquery ajax

#


DOM
